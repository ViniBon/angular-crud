import{A as R,Aa as me,B as I,Ba as de,Ca as ce,D as _,Da as fe,E as T,Ea as ge,F as E,Fa as he,G as w,Ga as ve,Ha as be,I as G,J as Y,Ka as V,La as ye,R as N,T as M,V as B,ba as d,c as F,ca as Z,da as $,e as K,ea as ee,f as A,fa as S,ga as oe,ha as te,i as y,ia as ie,j,ja as re,ka as ae,l as h,la as q,m as v,ma as se,o as u,p,qa as ne,ra as ue,t as n,u as f,v as g,va as le,w as b,x as X,xa as pe,y as U,ya as L,z as D,za as k}from"./chunk-6363PR2U.js";var O,Fe=new Uint8Array(16);function H(){if(!O&&(O=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(Fe)}var Ce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ae(r){return typeof r=="string"&&Ce.test(r)}var we=Ae;var m=[];for(W=0;W<256;++W)m.push((W+256).toString(16).substr(1));var W;function je(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=(m[r[e+0]]+m[r[e+1]]+m[r[e+2]]+m[r[e+3]]+"-"+m[r[e+4]]+m[r[e+5]]+"-"+m[r[e+6]]+m[r[e+7]]+"-"+m[r[e+8]]+m[r[e+9]]+"-"+m[r[e+10]]+m[r[e+11]]+m[r[e+12]]+m[r[e+13]]+m[r[e+14]]+m[r[e+15]]).toLowerCase();if(!we(c))throw TypeError("Stringified UUID is invalid");return c}var Ne=je;function qe(r,e,c){r=r||{};var o=r.random||(r.rng||H)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){c=c||0;for(var i=0;i<16;++i)e[c+i]=o[i];return e}return Ne(o)}var J=qe;function Me(){let r="",c="0123456789";for(let o=0;o<7;o++){let i=Math.floor(Math.random()*c.length);i<0||i>10?o-=1:r+=c[i]}return r}var C=(()=>{let e=class e{getUsuarios(){try{let o=localStorage.getItem(e.nomeTabela);return o?JSON.parse(o):[]}catch(o){return console.error("Erro ao buscar usu\xE1rios no local storage:",o),[]}}getUserById(o){try{return this.getUsuarios().find(t=>t.id===o)}catch(i){console.error("Erro ao buscar usu\xE1rio no local storage:",i);return}}addUsuario(o){let i=J();o.id=i,o.identificador=Me(),o.nomeCompleto=o.nome.toLowerCase()+" "+o.sobrenome.toLowerCase();try{let t=this.getUsuarios();t.push(o),localStorage.setItem(e.nomeTabela,JSON.stringify(t))}catch(t){console.error("Erro ao adicionar usu\xE1rio no local storage:",t)}}updateUsuario(o){o.nomeCompleto=o.nome.toLowerCase()+" "+o.sobrenome.toLowerCase();let i=this.getUsuarios(),t=i.findIndex(a=>a.id===o.id);if(t!==-1){let a=[...i];a[t]=o;try{localStorage.setItem(e.nomeTabela,JSON.stringify(a))}catch(l){console.error("Erro ao atualizar usu\xE1rio no local storage:",l)}}else console.error("Usu\xE1rio n\xE3o encontrado com ID:",o.id)}deleteUsuario(o){let i=this.getUsuarios();i=i.filter(t=>t.id!==o);try{localStorage.setItem(e.nomeTabela,JSON.stringify(i))}catch(t){console.error("Erro ao deletar usu\xE1rio no local storage:",t)}}};e.nomeTabela="Usuarios",e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let r=e;return r})();var x=function(r){return r.COMUM="COMUM",r.ADMIN="ADMIN",r}(x||{});var De=(()=>{let e=class e{constructor(o,i,t,a,l){this.router=o,this.route=i,this.usuariosApiService=t,this.poDialog=a,this.notificacao=l,this.carregando=!1,this.acoesTabela=[{label:"Editar",action:s=>this.router.navigate(["novo-usuario"],{relativeTo:this.route,queryParams:s})},{label:"Ver Detalhes",action:s=>this.router.navigate(["detalhes-usuario"],{relativeTo:this.route,queryParams:s})},{label:"Excluir",action:s=>this.deleteRow(s.id)}],this.colunasTabela=[{label:"Nome completo",property:"nomeCompleto"},{label:"Email",property:"email"},{property:"status",type:"label",label:"Status",width:"5%",labels:[{value:x.COMUM,color:"color-11",label:"COMUM",textColor:"white"},{value:x.ADMIN,color:"color-08",label:"ADMIN",textColor:"white"}]}]}ngOnInit(){this.init()}init(){this.carregando=!0,setTimeout(()=>{this.carregando=!1,this.itensTabela=this.usuariosApiService.getUsuarios()},2e3)}deleteRow(o){this.poDialog.confirm({title:"Excluir usu\xE1rio",message:"Confirma a exclus\xE3o do respectivo usu\xE1rio?",confirm:()=>F(this,null,function*(){this.carregando=!0,[].push(this.usuariosApiService.deleteUsuario(o)),this.notificacao.success("Usu\xE1rio exclu\xEDdo com sucesso!"),this.init()})})}};e.\u0275fac=function(i){return new(i||e)(p(M),p(N),p(C),p(L),p(k))},e.\u0275cmp=y({type:e,selectors:[["grid-usuarios"]],features:[w([C])],decls:2,vars:8,consts:[["p-container","shadow",3,"p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-draggable","p-hide-table-search"]],template:function(i,t){i&1&&b(0,"po-divider")(1,"po-table",0),i&2&&(u(),n("p-sort",!0)("p-striped",!0)("p-columns",t.colunasTabela)("p-items",t.itensTabela)("p-actions",t.acoesTabela)("p-loading",t.carregando)("p-draggable",!0)("p-hide-table-search",!1))},dependencies:[me,q],encapsulation:2});let r=e;return r})();var Re=(()=>{let e=class e{constructor(o,i){this.router=o,this.activateRoute=i,this.acoes=[{label:"Novo Usu\xE1rio",type:"primary",action:()=>this.novoUsuario()}],this.breadcrumb={items:[{label:"In\xEDcio",link:"/"},{label:"Usu\xE1rios",link:"/usuarios"}]}}get titulo(){return"Usu\xE1rios"}ngOnInit(){}novoUsuario(){this.router.navigate(["novo-usuario"],{relativeTo:this.activateRoute})}};e.\u0275fac=function(i){return new(i||e)(p(M),p(N))},e.\u0275cmp=y({type:e,selectors:[["app-usuarios"]],decls:2,vars:3,consts:[[3,"p-title","p-actions","p-breadcrumb"]],template:function(i,t){i&1&&(f(0,"po-page-default",0),b(1,"grid-usuarios"),g()),i&2&&n("p-title",t.titulo)("p-actions",t.acoes)("p-breadcrumb",t.breadcrumb)},dependencies:[V,De],encapsulation:2});let r=e;return r})();function Ie(r){let e=r.split("-"),c=parseInt(e[2],10),o=parseInt(e[1],10)-1,i=parseInt(e[0],10),t=new Date(i,o,c);return!(isNaN(t.getTime())||t.getFullYear()!==i||t.getMonth()!==o||t.getDate()!==c||t>new Date)}var ke=["inputNome"],Oe=["inputSobrenome"],We=["inputEmail"],xe=["inputTelefone"],Qe=["inputDataNasc"],Ge=["selectStatus"],Be=()=>({label:"COMUM",value:"COMUM"}),He=()=>({label:"ADMIN",value:"ADMIN"}),Je=(r,e)=>[r,e],Se=(()=>{let e=class e{constructor(o,i,t,a,l){this.router=o,this.activateRoute=i,this.usuariosApiService=t,this.notificacao=a,this.poDialog=l,this.form=this.criarFormulario(),this.acoes=[],this.normalAcoes=[{label:"Salvar",type:"primary",action:()=>this.salvarUsuario(this.form.value,"/usuarios")},{label:"Cancelar",type:"Default",action:()=>this.cancelarCadastro("/usuarios")}],this.editarAcoes=[{label:"Salvar edi\xE7\xE3o",type:"primary",action:()=>this.editarUsuario(this.form.value,"/usuarios")},{label:"Cancelar",type:"Default",action:()=>this.cancelarCadastro("/usuarios")}],this.breadcrumb={items:[{label:"In\xEDcio",link:"/"},{label:"Usu\xE1rios",link:"/usuarios"},{label:"Novo usuario",link:"/novo-usuario"}]}}get nomeUsuario(){return this.form.get("nome")?.value||""}get sobrenomeUsuario(){return this.form.get("sobrenome")?.value||""}get telefoneUsuario(){return this.form.get("telefone")?.value||""}get dataNascUsuario(){return this.form.get("dataNasc")?.value||""}get statusUsuario(){return this.form.get("status")?.value||""}get titulo(){return"Novo Usu\xE1rio"}ngOnInit(){this.usuarioRegistro=this.activateRoute.snapshot.queryParams,this.usuarioRegistro.id===void 0?this.acoes=this.normalAcoes:(this.acoes=this.editarAcoes,this.breadcrumb.items.pop(),this.breadcrumb.items.push({label:"Editar usu\xE1rio",link:"/novo-usuario"}))}criarFormulario(){return new ee({nome:new S(null,[d.required,d.minLength(3)]),sobrenome:new S(null,[d.required,d.minLength(3)]),telefone:new S(null,[d.required,d.minLength(10),d.maxLength(11)]),email:new S(null,[d.required,d.minLength(10),d.email]),dataNasc:new S(null,[d.required,d.minLength(10),d.maxLength(10)]),status:new S(null,[d.required])})}salvarUsuario(o,i){this.validarCampos()!==!1&&this.validarDados(o)!==!1&&this.poDialog.confirm({title:"Salvar usu\xE1rio",message:"Deseja salvar o usu\xE1rio?",confirm:()=>F(this,null,function*(){o.nomeCompleto,this.usuariosApiService.addUsuario(o),this.notificacao.success("Usu\xE1rio inclu\xEDdo com sucesso!"),this.router.navigate([i],{relativeTo:this.activateRoute})})})}editarUsuario(o,i){this.validarDados(o,!0)!==!1&&this.poDialog.confirm({title:"Salvar edi\xE7\xE3o",message:"Deseja salvar a edi\xE7\xE3o do usu\xE1rio?",confirm:()=>F(this,null,function*(){o.id=this.usuarioRegistro.id,o.identificador=this.usuarioRegistro.identificador,this.usuariosApiService.updateUsuario(o),this.notificacao.success("Edi\xE7\xE3o efetuada com sucesso!"),this.router.navigate([i],{relativeTo:this.activateRoute})})})}cancelarCadastro(o){this.router.navigate([o],{relativeTo:this.activateRoute})}validarCampos(){if(this.form){let o=Object.keys(this.form.value),i=[this.inputNome,this.inputSobrenome,this.inputTelefone,this.inputEmail,this.inputDataNasc];return o.forEach(t=>{let a=this.form.get(t);a&&i.forEach(l=>{l.validate(t)&&(a.markAsTouched(),a.markAsDirty(),a.updateValueAndValidity())})}),this.form.valid}return!1}validarDados(o,i){let t=Number(o.telefone);return Number.isNaN(t)?(this.notificacao.warning("H\xE1 campos inv\xE1lidos!"),!1):o.status===null?(this.notificacao.warning("H\xE1 campos inv\xE1lidos!"),!1):Ie(o.dataNasc)?!i&&this.usuariosApiService.getUsuarios().map(s=>{if(s.nome===o.nome||s.email===o.email)return!1}).filter(s=>s===!1).length>=1?(this.notificacao.warning("H\xE1 campos inv\xE1lidos ou j\xE1 h\xE1 registros com esses dados!"),!1):!0:(this.notificacao.warning("H\xE1 campos inv\xE1lidos!"),!1)}};e.\u0275fac=function(i){return new(i||e)(p(M),p(N),p(C),p(k),p(L))},e.\u0275cmp=y({type:e,selectors:[["app-novo-usuario"]],viewQuery:function(i,t){if(i&1&&(D(ke,7),D(Oe,7),D(We,7),D(xe,7),D(Qe,7),D(Ge,7)),i&2){let a;R(a=I())&&(t.inputNome=a.first),R(a=I())&&(t.inputSobrenome=a.first),R(a=I())&&(t.inputTelefone=a.first),R(a=I())&&(t.inputEmail=a.first),R(a=I())&&(t.inputDataNasc=a.first),R(a=I())&&(t.selectDataNasc=a.first)}},features:[w([C])],decls:19,vars:26,consts:[["inputNome",""],["inputSobrenome",""],["inputDataNasc",""],["inputEmail",""],["inputTelefone",""],["selectStatus",""],[3,"p-title","p-actions","p-breadcrumb"],[3,"formGroup"],[1,"po-row"],["name","nome","formControlName","nome","type","text","p-required","true",1,"po-xl-6","po-md-5","po-sm-12","po-mt-2","po-label",3,"p-blur","ngModelChange","p-label","p-placeholder","ngModel"],["name","sobrenome","formControlName","sobrenome","type","text","p-required","true",1,"po-xl-6","po-md-5","po-sm-12","po-mt-2","po-label",3,"p-blur","ngModelChange","p-label","p-placeholder","ngModel"],["p-format","dd/mm/yyyy","name","dataNasc","formControlName","dataNasc","p-required","true",1,"po-xl-6","po-md-10","po-sm-12","po-mt-2","po-label",3,"p-blur","ngModelChange","p-label","p-placeholder","ngModel"],["name","email","formControlName","email","type","text","p-required","true",1,"po-xl-6","po-md-5","po-sm-12","po-mt-2","po-label",3,"p-blur","ngModelChange","p-label","p-placeholder","ngModel"],["name","telefone","formControlName","telefone","p-required","true",1,"po-xl-6","po-md-5","po-sm-12","po-mt-2","po-label",3,"p-blur","ngModelChange","p-label","p-placeholder","ngModel"],["formControlName","status","name","status","p-label","Status do usu\xE1rio","type","text","p-required","true",1,"po-xl-6","po-md-10","po-sm-12","po-mt-2","po-label",3,"p-blur","p-placeholder","p-options"]],template:function(i,t){if(i&1){let a=X();f(0,"po-page-default",6)(1,"form",7)(2,"div",8)(3,"po-input",9,0),U("p-blur",function(){return h(a),v(t.validarCampos())}),E("ngModelChange",function(s){return h(a),T(t.usuarioRegistro.nome,s)||(t.usuarioRegistro.nome=s),v(s)}),g(),f(5,"po-input",10,1),U("p-blur",function(){return h(a),v(t.validarCampos())}),E("ngModelChange",function(s){return h(a),T(t.usuarioRegistro.sobrenome,s)||(t.usuarioRegistro.sobrenome=s),v(s)}),g()(),f(7,"div",8)(8,"po-datepicker",11,2),U("p-blur",function(){return h(a),v(t.validarCampos())}),E("ngModelChange",function(s){return h(a),T(t.usuarioRegistro.dataNasc,s)||(t.usuarioRegistro.dataNasc=s),v(s)}),g()(),f(10,"div",8)(11,"po-input",12,3),U("p-blur",function(){return h(a),v(t.validarCampos())}),E("ngModelChange",function(s){return h(a),T(t.usuarioRegistro.email,s)||(t.usuarioRegistro.email=s),v(s)}),g(),f(13,"po-input",13,4),U("p-blur",function(){return h(a),v(t.validarCampos())}),E("ngModelChange",function(s){return h(a),T(t.usuarioRegistro.telefone,s)||(t.usuarioRegistro.telefone=s),v(s)}),g()(),b(15,"div",8),f(16,"div")(17,"po-select",14,5),U("p-blur",function(){return h(a),v(t.validarCampos())}),g()()()()}i&2&&(n("p-title",t.titulo)("p-actions",t.acoes)("p-breadcrumb",t.breadcrumb),u(),n("formGroup",t.form),u(2),n("p-label","Nome")("p-placeholder","Informe o nome"),_("ngModel",t.usuarioRegistro.nome),u(2),n("p-label","Sobrenome")("p-placeholder","Informe o sobrenome"),_("ngModel",t.usuarioRegistro.sobrenome),u(3),n("p-label","Data de Nascimento")("p-placeholder","Informe a data de nascimento Ex.10021998"),_("ngModel",t.usuarioRegistro.dataNasc),u(3),n("p-label","E-mail")("p-placeholder","Informe o e-mail Ex.usuario@dominio.com.br"),_("ngModel",t.usuarioRegistro.email),u(2),n("p-label","Telefone")("p-placeholder","Informe o telefone Ex.47992638172"),_("ngModel",t.usuarioRegistro.telefone),u(4),n("p-placeholder","Selecione o status")("p-options",Y(23,Je,G(21,Be),G(22,He))))},dependencies:[V,le,de,ce,oe,Z,$,te,ie],encapsulation:2});let r=e;return r})();function Pe(r){if(r.length<10)return"";let e=r.replace(/\D/g,"");return e.length===11?`(${e.substring(0,2)})${e.substring(2,7)}-${e.substring(7)}`:e.length===10?`(${e.substring(0,2)})${e.substring(2,6)}-${e.substring(6)}`:r}function _e(r){if(r.length<8)return"";let e=r.replace(/\D/g,""),c=e.substring(6,8),o=e.substring(4,6),i=e.substring(0,4);return`${c}/${o}/${i}`}var Te=(()=>{let e=class e{constructor(){}ngOnInit(){this.formatarRegistros(this.usuarioRegistro)}formatarRegistros(o){this.telefoneComMascara=Pe(o.telefone),this.dataNascComMascara=_e(o.dataNasc),this.nomeFormatado=o.nome.toLowerCase(),this.sobrenomeFormatado=o.sobrenome.toLowerCase()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=y({type:e,selectors:[["detalhes-usuario"]],inputs:{usuarioRegistro:"usuarioRegistro"},features:[w([])],decls:11,vars:7,consts:[[1,"po-row","po-mb-4"],["p-label","Status",1,"po-md-12"],["p-label","Identificador",1,"po-md-4","po-mb-md-2",3,"p-value"],["p-label","Status",1,"po-md-4","po-mb-md-2",3,"p-value"],["p-label","Dados do Usu\xE1rio",1,"po-md-12"],["p-label","Nome",1,"po-md-4","po-mb-md-2",3,"p-value"],["p-label","Sobrenome",1,"po-md-4","po-mb-md-2",3,"p-value"],["p-label","E-mail",1,"po-md-4","po-mb-md-2",3,"p-value"],["p-label","Telefone",1,"po-md-4","po-mb-md-2",3,"p-value"],["p-label","Data de nascimento",1,"po-md-4","po-mb-md-2",3,"p-value"]],template:function(i,t){i&1&&(f(0,"div",0),b(1,"po-divider",1)(2,"po-info",2)(3,"po-info",3),g(),f(4,"div",0),b(5,"po-divider",4)(6,"po-info",5)(7,"po-info",6)(8,"po-info",7)(9,"po-info",8)(10,"po-info",9),g()),i&2&&(u(2),n("p-value",t.usuarioRegistro.identificador),u(),n("p-value",t.usuarioRegistro.status),u(3),n("p-value",t.nomeFormatado),u(),n("p-value",t.sobrenomeFormatado),u(),n("p-value",t.usuarioRegistro.email),u(),n("p-value",t.telefoneComMascara),u(),n("p-value",t.dataNascComMascara))},dependencies:[q,he],encapsulation:2});let r=e;return r})();var Ee=(()=>{let e=class e{constructor(o,i){this.router=o,this.activateRoute=i,this.acoes=[{label:"Voltar",type:"Default",action:()=>this.voltar("/usuarios")}],this.breadcrumb={items:[{label:"In\xEDcio",link:"/"},{label:"Usu\xE1rios",link:"/usuarios"},{label:"Detalhes do usu\xE1rio",link:"/detalhes-usuario"}]}}get titulo(){return"Detalhes do usu\xE1rio"}ngOnInit(){this.usuarioRegistro=this.activateRoute.snapshot.queryParams}voltar(o){this.router.navigate([o],{relativeTo:this.activateRoute})}};e.\u0275fac=function(i){return new(i||e)(p(M),p(N))},e.\u0275cmp=y({type:e,selectors:[["app-detalhes-usuario"]],features:[w([C])],decls:2,vars:4,consts:[[3,"p-title","p-actions","p-breadcrumb"],[3,"usuarioRegistro"]],template:function(i,t){i&1&&(f(0,"po-page-default",0),b(1,"detalhes-usuario",1),g()),i&2&&(n("p-title",t.titulo)("p-actions",t.acoes)("p-breadcrumb",t.breadcrumb),u(),n("usuarioRegistro",t.usuarioRegistro))},dependencies:[V,Te],encapsulation:2});let r=e;return r})();var Ke=[{path:"",component:Re},{path:"novo-usuario",component:Se},{path:"detalhes-usuario",component:Ee}],Ve=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=j({type:e}),e.\u0275inj=A({imports:[B.forChild(Ke),B]});let r=e;return r})();var Jo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=j({type:e}),e.\u0275inj=A({imports:[ue,ye,Ve,fe,se,pe,be,ne,ge,re,ae,ve]});let r=e;return r})();export{Jo as UsuariosModule};
